<div ng-controller="MainController">
    <h2>Følgende er registrert:</h2>
    <b>Type rapport:</b> {{anomaly.anomalyType.name}}<br>
    <b>Klubb:</b> {{anomaly.club.name}}<br>
    <b>Sted:</b> {{anomaly.location.name}}<br>
    <b>Dato og tidspunkt: </b>{{anomaly.dateTime| date:'dd.MM.yyyy HH.mm'}}<br>

    <h3>Involverte personer:</h3>
    <div ng-repeat="person in anomaly.involvedPersons">
        <b>Navn:</b> {{person.firstname}} {{person.lastname}} <br>
        <b>Medlemsnummer:</b> {{person.melwinId}}<br>
        <b>Lisenser:</b> <li ng-repeat="license in person.licenses">
            {{license.licenseName}}
        </li>
        <b>Hopptype: </b>{{person.jumptype.name}}<br>
        <b>Erfaring år:</b> {{person.yearsOfExperience}}<br>
        <b>Erfaring hopp:</b> {{person.numberOfJumps}}<br>
        <br>

        <div ng-show="person.gear != null || person.injury != null">
            <h3>Tilleggsinformasjon:</h3>
            <div ng-show="person.gear.harnessType != null">
                <h4>Seletøy</h4>
                <b>Type: </b> {{person.gear.harnessType}}<br>
                <b>Erfaring: </b> {{person.gear.harnessExperience}}<br>
                <b>Utløsersystem: </b> {{person.gear.harnessReleaseSystem}}<br>
            </div>
            <div ng-show="person.gear.mainCanopyType != null">
                <h4>Hovedskjerm</h4>
                <b>Type: </b> {{person.gear.mainCanopyType}}<br>
                <b>Størrelse: </b> {{person.gear.mainCanopySize}}<br>
                <b>Erfaring: </b> {{person.gear.mainCanopyType}}<br>
            </div>
            <div ng-show="person.gear.reserveCanopyType != null">
                <h4>Reserveskjerm</h4>
                <b>Type: </b> {{person.gear.reserveCanopyType}}<br>
                <b>Størrelse: </b> {{person.gear.reserveCanopySize}}<br>
            </div>
            <div ng-show="person.gear.aadType != null">
                <h4>Nødåpner</h4>
                <b>Type: </b> {{person.gear.aadType}}<br>
                <b>Fyringshøyde: </b> {{person.gear.aadFireHeight}}<br>
            </div>
            <div ng-show="person.injury != null">
                <h4>Skade</h4>
                <b>Beskrivelse: </b> {{person.injury}}<br>
            </div>
        </div>
    </div>
    <h3>Hendelser:</h3>
    <div ng-repeat="incident in anomaly.incidents">
        <b>Involverte:</b> <li ng-repeat="person in incident.involvedPersonsId">{{getPersonById(person).firstname}} {{getPersonById(person).lastname}}</li>
        <b>Hendelse:</b> {{incident.incidentType.name}}<br>
        <b>Kommentar:</b> {{incident.commentFromHL}} <br><br>  
    </div>
    <b>HL's kommentar:</b> {{anomaly.jumpleaderComment}}
    <br><br>
    <button class="btn btn-default" ng-click="saveAnomaly()">Lagre og send til HI</button>
</div>
